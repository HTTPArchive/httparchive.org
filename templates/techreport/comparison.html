{% extends "techreport/report.html" %}

{% block section %}
  {{ super() }}

  {% set technologies = tech_report_page.filters.app or tech_report_page.config.default.app %}
  {% set technologies_str = ','.join(technologies) %}

  <div class="intro block-m">
    <div class="info">
      <h1>
        <span class="subtitle">Tech Report</span>
        <span class="main-title">Comparison</span>
      </h1>
    </div>
    <div class="filters">
      {% include "techreport/templates/filters.html" %}
    </div>
  </div>

  <div class="report-content">
    <div class="client-selector block-m">
      <label for="client-breakdown">Client</label>
      <select name="client-breakdown" id="client-breakdown">
        <option value="mobile" {% if request.args.get('client', '') == 'mobile' %}selected{% endif %}>Mobile</option>
        <option value="desktop" {% if request.args.get('client', '') == 'desktop' %}selected{% endif %}>Desktop</option>
      </select>
    </div>

    <div class="block-m report-section">
      <div class="card table-ui-wrapper">
        <h3>Comparing {{ technologies | length }} technologies</h3>
        <p>Description</p>

        <table-cwv-overview-multitech
          data-scope="all-data"
          client="{{ request.args.get('client', '')  or 'mobile' }}"
          technologies="{{ technologies_str }}"
        >
        </table-cwv-overview-multitech>
      </div>
    </div>

    <div class="block-m report-section">
      <h2>Adoption</h2>
      <p>Description</p>

      <div class="card">
        <h3>Origins</h3>
        <p>Explanation</p>
        <table-general-multitech
          data-scope="all-data"
          client="{{ request.args.get('client', '')  or 'mobile' }}"
          technologies="{{ technologies_str }}"
          metric="origins"
          id="origins-over-time"
        >
          <span slot="table-caption">
            The origins over time, compared for the selected technologies.
          </span>
        </table-general-multitech>
      </div>
    </div>

    <div class="block-m report-section">
      <h2>Core Web Vitals</h2>
      <p>Description</p>

      <div class="card">
        <h3>Good Core Web Vitals</h3>
        <p>Explanation</p>
        <table-general-multitech
          data-scope="all-data"
          data-unit="%"
          client="{{ request.args.get('client', '')  or 'mobile' }}"
          technologies="{{ technologies_str }}"
          metric="pct_good_*subcategory*"
          subcategory="{{ request.args.get('good-cwv-over-time', '')  or 'cwv' }}"
          id="good-cwv-over-time"
        >
          <span slot="table-caption">
            The amount of good core web vitals over time, compared for the selected technologies.
          </span>
          <form slot="subcategory-selector">
            <label for="subcategory">Subcategory</label>
            <select name="subcategory" id="subcategory">
              <option value="cwv" {% if request.args.get('good-cwv-over-time', '') == 'cwv' %}selected{% endif %}>Overall CWVs</option>
              <option value="lcp" {% if request.args.get('good-cwv-over-time', '') == 'lcp' %}selected{% endif %}>LCP</option>
              <option value="fid" {% if request.args.get('good-cwv-over-time', '') == 'fid' %}selected{% endif %}>FID</option>
              <option value="cls" {% if request.args.get('good-cwv-over-time', '') == 'cls' %}selected{% endif %}>CLS</option>
              <option value="fcp" {% if request.args.get('good-cwv-over-time', '') == 'fcp' %}selected{% endif %}>FCP</option>
              <option value="ttfb" {% if request.args.get('good-cwv-over-time', '') == 'ttfb' %}selected{% endif %}>TTFB</option>
              <option value="inp" {% if request.args.get('good-cwv-over-time', '') == 'inp' %}selected{% endif %}>INP</option>
            </select>
          </form>
        </table-general-multitech>
      </div>
    </div>

    <div class="block-m report-section">
      <h2>Lighthouse</h2>
      <p>Description</p>

      <div class="card">
        <h3>Median Lighthouse Performance</h3>
        <p>Explanation</p>
        <table-general-multitech
          data-scope="all-data"
          client="{{ request.args.get('client', '')  or 'mobile' }}"
          technologies="{{ technologies_str }}"
          metric="median_lighthouse_score_*subcategory*"
          subcategory="{{ request.args.get('median-lighthouse-over-time', '')  or 'performance' }}"
          id="median-lighthouse-over-time"
        >
          <span slot="table-caption">
            The lighthouse scores over time, compared for the selected technologies.
          </span>
          <form slot="subcategory-selector">
            <label for="subcategory">Subcategory</label>
            <select name="subcategory" id="subcategory">
              <option value="performance" {% if request.args.get('median-lighthouse-over-time', '') == 'performance' %}selected{% endif %}>Performance</option>
              <option value="accessibility" {% if request.args.get('median-lighthouse-over-time', '') == 'accessibility' %}selected{% endif %}>Accessibility</option>
              <option value="pwa" {% if request.args.get('median-lighthouse-over-time', '') == 'pwa' %}selected{% endif %}>PWA</option>
              <option value="seo" {% if request.args.get('median-lighthouse-over-time', '') == 'seo' %}selected{% endif %}>SEO</option>
              <option value="best_practices" {% if request.args.get('median-lighthouse-over-time', '') == 'best_practices' %}selected{% endif %}>Best practices</option>
            </select>
          </form>
        </table-general-multitech>
      </div>
    </div>

    <div class="block-m report-section">
      <h2>Page weight</h2>
      <p>Description</p>

      <div class="card">
        <h3>Median bytes total</h3>
        <p>Explanation</p>
        <table-general-multitech
          data-scope="all-data"
          data-unit=" kB"
          client="{{ request.args.get('client', '')  or 'mobile' }}"
          technologies="{{ technologies_str }}"
          metric="median_bytes_*subcategory*"
          subcategory="{{ request.args.get('weight-over-time', '')  or 'image' }}"
          id="weight-over-time"
        >
          <span slot="table-caption">
            The page weight over time, compared for the selected technologies.
          </span>
          <label for="subcategory">Subcategory</label>
          <form slot="subcategory-selector">
            <label for="subcategory">Subcategory</label>
            <select name="subcategory" id="subcategory">
              <option value="image" {% if request.args.get('weight-over-time', '') == 'image' %}selected{% endif %}>Image weight</option>
              <option value="js" {% if request.args.get('weight-over-time', '') == 'js' %}selected{% endif %}>Javascript transfer size</option>
              <option value="total" {% if request.args.get('weight-over-time', '') == 'total' %}selected{% endif %}>Total page weight</option>
            </select>
          </form>
        </table-general-multitech>
      </div>
    </div>
  </div>

{% endblock %}
