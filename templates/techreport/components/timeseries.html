<div data-id="{{ timeseries.id }}" data-component="timeseries">
  {% if timeseries.subcategory %}
    {% set subcategory = timeseries.subcategory %}
    {% set id = timeseries.id %}
    {% include "techreport/components/subcategory.html" %}
  {% endif %}

  <h3>{{ timeseries.title }}</h3>
  <p>{{ timeseries.description }}</p>

  {% if timeseries.summary %}
    <div class="data-summary">
      <div class="heading">
        <p>
          Latest data: <span data-slot="timestamp"></span>
        </p>
      </div>
      <div class="breakdown-list">
        {% if timeseries.viz.series.breakdown == 'client' %}
          {% for breakdown in timeseries.viz.series["values"] %}
            <div class="breakdown-item">
              <p class="breakdown-label">{{ breakdown.name }}</p>
              <p class="breakdown-value">00{{ breakdown.suffix }}</p>
            </div>
          {% endfor %}
        {% endif %}
      </div>
    </div>
  {% endif %}

  <!-- This will be used to load the Highcharts viz into -->
  <div id="{{ timeseries.id }}-timeseries"></div>

  <button class="btn show-table" type="button" data-id="{{ timeseries.id }}">Show table</button>

  <div id="{{ timeseries.id }}-table-wrapper" class="hidden">
    <table-general
      data-scope="all-data"
      client="{{ request.args.get('client', '')  or 'mobile' }}"
      columns="{{ timeseries.table.columns }}"
      subcategory="{% if subcategory %}{{ subcategory.default }}{% endif %}"
      id="{{ timeseries.id }}-table"
    >
      <span slot="table-caption">
        {{ timeseries.title }}
      </span>
    </table-general>
  </div>

</div>
