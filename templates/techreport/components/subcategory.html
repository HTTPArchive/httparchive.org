{% set selectedparam = request.args.get(subcategory.param, '') or subcategory.default %}
<div class="subcategory-selector-wrapper">
  <label for="subcategory-{{ subcategory.base }}">Metric</label>
  <select
    name="subcategory"
    class="subcategory-selector"
    id="subcategory-{{ subcategory.base }}"
    data-controls="{{ id }}"
    data-param="{{ subcategory.param }}"
    data-endpoint="{{ endpoint }}"
  >
    {% for option in subcategory.options %}
      {% if selectedparam == option.value %}
      <option value="{{ option.value }}" selected>
        {{ option.label }}
      </option>
      {% else %}
      <option value="{{ option.value }}">
        {{ option.label }}
      </option>
      {% endif %}
    {% endfor %}
  </select>
</div>
