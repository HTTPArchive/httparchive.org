{% set selectedParam = request.args.get(subcategory.param, '') or subcategory.default %}
<div class="subcategory-selector-wrapper">
  <label for="subcategory-{{ subcategory.base }}">Metric</label>
  <select
    name="subcategory"
    class="subcategory-selector"
    id="subcategory-{{ subcategory.base }}"
    data-controls="{{ id }}"
    data-param="{{ subcategory.param }}"
    data-endpoint="{{ endpoint }}"
  >
    {% for option in subcategory.options %}
      <option value="{{ option.value }}" {% if selectedParam == option.value %}selected{% endif %}>
        {{ option.label }}
      </option>
    {% endfor %}
  </select>
</div>
