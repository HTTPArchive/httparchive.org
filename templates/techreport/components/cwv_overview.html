{% set tech_data = tech_report_page.data[filtered_technology] %}
{% set latest = tech_data[0] %}

<div class="table-ui-wrapper card" tabindex="0" role="region" aria-labelledby="cwv-overview-caption">
  <h3>Latest data</h3>
  <table class="table-ui">
    <caption class="sr-only" id="cwv-overview-caption">Latest % of websites with good core web vitals.</caption>
    <thead>
      <tr>
        <th>Core Web Vital</th>
        <th>% Good scores</th>
        <th>Trend</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th>Overall</th>
        <td>{{latest.pct_good_cwv}}%</td>
        <td>
          <ul>
            {% for entry in tech_data %}
              {% if entry.client == "mobile" %}
                <li class="bar" style="--height: {{ entry.pct_good_cwv }}%">
                  <span class="sr-only">{{ entry.date }}: {{ entry.pct_good_cwv }}% with good CWVs</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </td>
      </tr>
      <tr>
        <th>LCP</th>
        <td>{{ latest.pct_good_lcp }}%</td>
        <td>
          <ul>
            {% for entry in tech_data %}
              {% if entry.client == "mobile" %}
                <li class="bar" style="--height: {{ entry.pct_good_lcp }}%">
                  <span class="sr-only">{{ entry.pct_good_lcp }}</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </td>
      </tr>
      <tr>
        <th>CLS</th>
        <td>{{latest.pct_good_cls}}%</td>
        <td>
          <ul>
            {% for entry in tech_data %}
              {% if entry.client == "mobile" %}
                <li class="bar" style="--height: {{ entry.pct_good_cls }}%">
                  <span class="sr-only">{{ entry.pct_good_cls }}</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </td>
      </tr>
      <tr>
        <th>FID</th>
        <td>{{latest.pct_good_fid}}%</td>
        <td>
          <ul>
            {% for entry in tech_data %}
              {% if entry.client == "mobile" %}
                <li class="bar" style="--height: {{ entry.pct_good_fid }}%">
                  <span class="sr-only">{{ entry.pct_good_fid }}</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </td>
      </tr>
      <tr>
        <th>FCP</th>
        <td>{{ latest.pct_good_fcp }}%</td>
        <td>
          <ul>
            {% for entry in tech_data %}
              {% if entry.client == "mobile" %}
                <li class="bar" style="--height: {{ entry.pct_good_fcp }}%">
                  <span class="sr-only">{{ entry.pct_good_fcp }}</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </td>
      </tr>
      <tr>
        <th>INP</th>
        <td>{{latest.pct_good_inp}}%</td>
        <td>
          <ul>
            {% for entry in tech_data %}
              {% if entry.client == "mobile" %}
                <li class="bar" style="--height: {{ entry.pct_good_inp }}%">
                  <span class="sr-only">{{ entry.pct_good_inp }}</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </td>
      </tr>
      <tr>
        <th>TTFB</th>
        <td>{{ latest.pct_good_ttfb }}%</td>
        <td>
          <ul>
            {% for entry in tech_data %}
              {% if entry.client == "mobile" %}
                <li class="bar" style="--height: {{ entry.pct_good_ttfb }}%">
                  <span class="sr-only">{{ entry.pct_good_ttfb }}</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
  <p class="footnote">Last updated at {{ latest.date }}.</p>
</div>
