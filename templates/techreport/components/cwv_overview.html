{% set tech_data = tech_report_page.data[filtered_technology] %}
{% set latest = tech_data[0] %}

<div class="table-ui-wrapper card" tabindex="0" role="region" aria-labelledby="cwv-overview-caption">
  <h3>Latest data</h3>
  <table class="table-ui">
    <caption class="sr-only" id="cwv-overview-caption">Latest % of websites with good core web vitals.</caption>
    <thead>
      <tr>
        <th>Core Web Vital</th>
        <th>% Good scores</th>
        <th>Trend</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th>Overall</th>
        <td>{{latest.origins_with_good_cwv}}%</td>
        <td>
          <ul>
            {% for entry in tech_data %}
              {% if entry.client == "mobile" %}
                <li class="bar" style="--height: calc({{ entry.origins_with_good_cwv }}% / {{ entry.origins_eligible_for_cwv }} * 100)">
                  <span class="sr-only">{{ entry.origins_with_good_cwv }}</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </td>
      </tr>
      <tr>
        <th>LCP</th>
        <td>{{latest.origins_with_good_lcp}}%</td>
        <td>
          <ul>
            {% for entry in tech_data %}
              {% if entry.client == "mobile" %}
                <li class="bar" style="--height: calc({{ entry.origins_with_good_lcp }}% / {{ entry.origins_eligible_for_cwv }} * 100)">
                  <span class="sr-only">{{ entry.origins_with_good_lcp }}</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </td>
      </tr>
      <tr>
        <th>CLS</th>
        <td>{{latest.origins_with_good_cls}}%</td>
        <td>
          <ul>
            {% for entry in tech_data %}
              {% if entry.client == "mobile" %}
                <li class="bar" style="--height: calc({{ entry.origins_with_good_cls }}% / {{ entry.origins_eligible_for_cwv }} * 100)">
                  <span class="sr-only">{{ entry.origins_with_good_cls }}</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </td>
      </tr>
      <tr>
        <th>FID</th>
        <td>{{latest.origins_with_good_fid}}%</td>
        <td>
          <ul>
            {% for entry in tech_data %}
              {% if entry.client == "mobile" %}
                <li class="bar" style="--height: calc({{ entry.origins_with_good_fid }}% / {{ entry.origins_eligible_for_cwv }} * 100)">
                  <span class="sr-only">{{ entry.origins_with_good_fid }}</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </td>
      </tr>
      <tr>
        <th>FCP</th>
        <td>{{latest.origins_with_good_fcp}}%</td>
        <td>
          <ul>
            {% for entry in tech_data %}
              {% if entry.client == "mobile" %}
                <li class="bar" style="--height: calc({{ entry.origins_with_good_fcp }}% / {{ entry.origins_eligible_for_cwv }} * 100)">
                  <span class="sr-only">{{ entry.origins_with_good_fcp }}</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </td>
      </tr>
      <tr>
        <th>INP</th>
        <td>{{latest.origins_with_good_inp}}%</td>
        <td>
          <ul>
            {% for entry in tech_data %}
              {% if entry.client == "mobile" %}
                <li class="bar" style="--height: calc({{ entry.origins_with_good_inp }}% / {{ entry.origins_eligible_for_cwv }} * 100)">
                  <span class="sr-only">{{ entry.origins_with_good_inp }}</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </td>
      </tr>
      <tr>
        <th>TTFB</th>
        <td>{{latest.origins_with_good_ttfb}}%</td>
        <td>
          <ul>
            {% for entry in tech_data %}
              {% if entry.client == "mobile" %}
                <li class="bar" style="--height: calc({{ entry.origins_with_good_ttfb }}% / {{ entry.origins_eligible_for_cwv }} * 100)">
                  <span class="sr-only">{{ entry.origins_with_good_ttfb }}</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
  <p class="footnote">Last updated at {{ latest.date }}.</p>
</div>
